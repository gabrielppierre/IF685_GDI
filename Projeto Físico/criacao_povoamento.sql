/* ================ CRIAÇÃO DAS TABELAS ================ */
CREATE TABLE ANIMAL(
    ID VARCHAR2(4) PRIMARY KEY,
    NOME VARCHAR2(80) NOT NULL,
    ESTADO_SAUDE VARCHAR2(80),
    DATA_NASC DATE,
    ID_MAE VARCHAR2(4),
    
    CONSTRAINT FK_FILHO_MAE FOREIGN KEY (ID_MAE) REFERENCES ANIMAL (ID)
);

CREATE TABLE TERRESTRE(
    ID VARCHAR(4)PRIMARY KEY,
    ALTURA NUMBER(4,2),
    TIPO_ABRIGO VARCHAR2(80),
    CONSTRAINT PK_TERRESTRE_ANIMAL FOREIGN KEY (ID) REFERENCES ANIMAL (ID)
);

CREATE TABLE AEREO(
    ID VARCHAR(4) PRIMARY KEY,
    ENVERGADURA NUMBER(3,2), 
    ALTURA_VOO NUMBER(4,2),
    
    CONSTRAINT PK_AEREO_ANIMAL FOREIGN KEY (ID) REFERENCES ANIMAL (ID)
);

CREATE TABLE AQUATICO(
    ID VARCHAR2(4) PRIMARY KEY,
    PROFUNDIDADE NUMBER(4,2),
    TAMANHO_PISCINA NUMBER(7,2),
    
    CONSTRAINT PK_AQUATICO_ANIMAL FOREIGN KEY (ID) REFERENCES ANIMAL (ID)
);

CREATE TABLE VETERINARIO(
    ID VARCHAR2(4) PRIMARY KEY,
    NOME VARCHAR2(80) NOT NULL,
    ESPECIALIZACAO VARCHAR2(80)
);

CREATE TABLE VETERINARIO_TELEFONE(
    TELEFONE VARCHAR2(11) PRIMARY KEY,
    ID VARCHAR2(4),
    
    CONSTRAINT FK_VET_TELEFONE FOREIGN KEY (ID) REFERENCES VETERINARIO (ID)
);

CREATE TABLE CONSULTA(
    ID_VET VARCHAR2(4),
    ID VARCHAR2(4),
    DATA DATE,
    DIAGNOSTICO VARCHAR2(255),
    PRESCRICAO VARCHAR2(255),
    
    CONSTRAINT FK_CONSULTA_VET FOREIGN KEY (ID_VET) REFERENCES VETERINARIO (ID),
    CONSTRAINT PK_CONSULTA PRIMARY KEY (ID_VET, ID)
);

CREATE TABLE ANIMAL_CONSULTA(
    ID_VET VARCHAR2(4),
    ID_CONSULTA VARCHAR2(4),
    ID_ANIMAL VARCHAR2(4),
    
    CONSTRAINT FK_CONSULTA FOREIGN KEY (ID_VET, ID_CONSULTA) REFERENCES CONSULTA (ID_VET, ID),
    CONSTRAINT PK_ANIMAL_CONSULTA PRIMARY KEY (ID_VET, ID_CONSULTA, ID_ANIMAL)
);

CREATE TABLE TRATADOR(
    ID VARCHAR2(4) PRIMARY KEY,
    NOME VARCHAR2(80),
    DATA_NASC DATE
);

CREATE TABLE TRATA(
    ID_TRATADOR VARCHAR2(4),
    ID_ANIMAL VARCHAR2(4),
    
    CONSTRAINT FK_TRATA_ANIMAL FOREIGN KEY (ID_ANIMAL) REFERENCES ANIMAL(ID),
    CONSTRAINT FK_TRATA_TRATADOR FOREIGN KEY (ID_TRATADOR) REFERENCES TRATADOR(ID),
    CONSTRAINT PK_TRATA PRIMARY KEY (ID_ANIMAL, ID_TRATADOR)
);

CREATE TABLE DIETA(
    ID VARCHAR2(4) PRIMARY KEY,
    QUANTIDADE NUMBER(5,2),
    DESCRICAO VARCHAR2(255),
    ID_TRATADOR VARCHAR2(4),
    ID_ANIMAL VARCHAR2(4),
    
    CONSTRAINT FK_DIETA_TRATA FOREIGN KEY (ID_TRATADOR, ID_ANIMAL) REFERENCES TRATA(ID_TRATADOR, ID_ANIMAL)
)

CREATE TABLE ZELADOR(
    ID VARCHAR2(4) PRIMARY KEY,
    NOME VARCHAR2(80),
    IDADE NUMBER(2) 
);

CREATE TABLE JAULA(
    ID VARCHAR(4) PRIMARY KEY,
    ID_ZELADOR VARCHAR(4) UNIQUE,
    DATA_MANUTENCAO DATE, 

    CONSTRAINT FK_ZELADOR_JAULA FOREIGN KEY (ID_ZELADOR) REFERENCES ZELADOR(ID)
);

CREATE TABLE EXPOSICAO(
    ID VARCHAR2(4) PRIMARY KEY,
    NOME VARCHAR2(255), 
    DATA_INICIO DATE, 
    DATA_FIM DATE
);

CREATE TABLE EXPOE(
    ID_EXPO VARCHAR2(4),
    ID_ANIMAL VARCHAR2(4), 
    ID_JAULA VARCHAR2(4) NOT NULL, 

    CONSTRAINT FK_EXPOE_EXPO FOREIGN KEY (ID_EXPO) REFERENCES EXPOSICAO(ID), 
    CONSTRAINT FK_EXPOE_ANIMAL FOREIGN KEY (ID_ANIMAL) REFERENCES ANIMAL(ID),
    CONSTRAINT PK_EXPOE PRIMARY KEY (ID_EXPO, ID_ANIMAL) 
);

CREATE TABLE VISITANTE(
    CPF VARCHAR2(11) PRIMARY KEY,
    NOME VARCHAR2(80),
    CONTATO_EMAIL VARCHAR2(80),
    CONTATO_TELEFONE VARCHAR2(11) 
);

CREATE TABLE VISITA(
    CPF_VISITANTE VARCHAR2(4),
    ID_EXPO VARCHAR2(4),

    CONSTRAINT FK_VISITA_VISITANTE FOREIGN KEY (CPF_VISITANTE) REFERENCES VISITANTE(CPF),
    CONSTRAINT FK_VISITA_EXPO FOREIGN KEY (ID_EXPO) REFERENCES EXPOSICAO(ID),
    CONSTRAINT PK_VISITA PRIMARY KEY (CPF_VISITANTE, ID_EXPO) 
);

/* ================ POVOAMENTO DAS TABELAS ================ */
INSERT INTO ANIMAL VALUES ('1111', 'LOLA', 'SAUDAVEL', TO_DATE('20/02/2023', 'DD/MM/YYYY'), NULL);
INSERT INTO ANIMAL VALUES ('2222', 'LALA', 'DOENTE', TO_DATE('20/12/2023', 'DD/MM/YYYY'), '1111');
INSERT INTO ANIMAL VALUES ('3333', 'ORAC', 'DOENTE', TO_DATE('12/12/2020', 'DD/MM/YYYY'), NULL);
INSERT INTO TERRESTRE VALUES ('1111', 4.50, 'SUBTERRANEO');
INSERT INTO AEREO VALUES ('2222', 3.75, 40.89);
INSERT INTO AQUATICO VALUES ('3333', 30.00, 400.90);
INSERT INTO VETERINARIO VALUES ('4444','JOCICLEITON MARCOS', 'BALEIA');
INSERT INTO VETERINARIO_TELEFONE VALUES ('1234567890','4444');
INSERT INTO VETERINARIO_TELEFONE VALUES ('0987654321','4444');
INSERT INTO CONSULTA VALUES ('4444', '5555', TO_DATE('18/02/2021', 'DD/MM/YYYY'), 'INDEFINIDO', 'EXAME DE SANGUE');
INSERT INTO ANIMAL_CONSULTA VALUES ('4444', '5555', '1111');
INSERT INTO TRATADOR VALUES ('6666', 'YASMIM', TO_DATE('11/11/1111', 'DD/MM/YYYY'))
INSERT INTO TRATA VALUES ('6666', '2222')
INSERT INTO CONSULTA VALUES ('4444', '5556', TO_DATE('20/02/2021', 'DD/MM/YYYY'), 'INDEFINIDO', 'EXAME DE SANGUE');
INSERT INTO ANIMAL_CONSULTA VALUES ('4444', '5556', '1111');
INSERT INTO DIETA VALUES ('7777', 22.50, 'MINHOCA', '6666', '2222');
INSERT INTO ZELADOR VALUES ('8888', 42, 'PAULO GUSTAVO');
INSERT INTO ZELADOR VALUES ('9999', 44, 'EDNA NATIVIDADE');
INSERT INTO ZELADOR VALUES ('0000', 22, 'TSANG ING');
INSERT INTO JAULA VALUES ('0101', TO_DATE('20/04/1969', 'DD/MM/YYYY'), '8888');
INSERT INTO JAULA VALUES ('0202', TO_DATE('11/09/2001', 'DD/MM/YYYY'), '9999');
INSERT INTO JAULA VALUES ('0303', TO_DATE('06/02/2018', 'DD/MM/YYYY'), '0000');
INSERT INTO EXPOSICAO VALUES('0404', 'import pandas', TO_DATE('11/01/2008', 'DD/MM/YYYY'), TO_DATE('11/01/2009', 'DD/MM/YYYY'));
INSERT INTO EXPOSICAO VALUES('0505', 'seaborn', TO_DATE('20/08/2012', 'DD/MM/YYYY'), TO_DATE('20/08/2013', 'DD/MM/YYYY'));
INSERT INTO EXPOE VALUES ('0404', '1111', '0101');
INSERT INTO EXPOE VALUES ('0505', '2222', '0202');
INSERT INTO VISITANTE VALUES ('0606', 'SURUAGY', 'suruagy@cin.ufpe.br', '12135553890');
INSERT INTO VISITANTE VALUES ('0707', 'ANDRE', 'andre@cin.ufpe.br', '81999012345');
INSERT INTO VISITA VALUES ('0606', '0404');
INSERT INTO VISITA VALUES ('0707', '0505');
